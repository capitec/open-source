{"version":3,"file":"CurrencyField.spec.js","sourceRoot":"","sources":["../../src/currency-field/CurrencyField.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    testLabelBehaviour,\n    testHintBehaviour,\n    testErrorBehaviour,\n    testValueBehaviour,\n    testClearableBehaviour,\n    testCustomClearableSlotBehaviour,\n    testPrefixBehaviour,\n    testSuffixBehaviour,\n    testDisabledBehaviour\n} from '../core/OmniInputPlaywright.js';\nimport { test, expect, mockEventListener, withCoverage /*keyboardPaste, clipboardCopy*/ } from '../utils/JestPlaywright.js';\nimport type { CurrencyField } from './CurrencyField.js';\n\ntest(`Currency Field - Visual and Behaviour`, async ({ page }) => {\n    await withCoverage(page, async () => {\n        await page.goto('/components/currency-field/');\n\n        const currencyField = page.locator('.Interactive').getByTestId('test-currency-field');\n\n        await currencyField.evaluate(async (c: CurrencyField) => {\n            c.value = '';\n            await c.updateComplete;\n        });\n\n        await expect(currencyField).toHaveScreenshot('currency-field-initial.png');\n\n        const inputField = currencyField.locator('input#inputField');\n\n        // Simulate click, focus and blur events\n        await inputField.click();\n        await expect(currencyField).toHaveScreenshot('currency-field-clicked.png');\n\n        await inputField.focus();\n        await expect(currencyField).toHaveScreenshot('currency-field-focussed.png');\n\n        await inputField.blur();\n        await expect(currencyField).toHaveScreenshot('currency-field-blurred.png');\n\n        const beforeinput = await mockEventListener(currencyField, 'beforeinput');\n\n        const value = '120000015';\n        await inputField.type(value);\n\n        // Check the following value as input value is formatted to currency value.\n        await expect(inputField).toHaveValue('1,200,000.15');\n        await expect(beforeinput).toBeCalledTimes(value.length);\n\n        // Backspacing to cover the removal of cents and cents separator\n\n        await inputField.press('Backspace');\n        await inputField.press('Backspace');\n\n        await expect(inputField).toHaveValue('12,000.00');\n\n        // Use left arrow key to position the caret after the currency separator.\n        await inputField.press('ArrowLeft');\n        await inputField.press('ArrowLeft');\n        await inputField.press('ArrowLeft');\n        await inputField.press('Backspace');\n\n        await expect(inputField).toHaveValue('1,200.00');\n\n        const number = '88.88';\n        // await clipboardCopy(page, number);\n        // await inputField.focus();\n        // await inputField.click();\n\n        // //Set the selection range of the input component to ensure the entire value is selected.\n        // await inputField.evaluate((i: HTMLInputElement) => i.setSelectionRange(0, 10));\n\n        // await keyboardPaste(page);\n        await currencyField.evaluate((c: CurrencyField, number) => (c.value = number), number);\n\n        await expect(inputField).toHaveValue(number);\n\n        await currencyField.evaluate(async (c: CurrencyField) => {\n            c.value = '';\n            await c.updateComplete;\n        });\n\n        await inputField.type(value);\n\n        // Check the following value as input value is formatted to currency value;\n        await expect(inputField).toHaveValue('1,200,000.15');\n\n        // // Paste invalid numeric value the alpha characters should be stripped and the value should be updated accordingly.\n        // await inputField.evaluate((i: HTMLInputElement) => i.setSelectionRange(3, 10));\n\n        // const invalidNumber = '4abc';\n        const invalidNumber = '124abc.15';\n        // await clipboardCopy(page, invalidNumber);\n        // await keyboardPaste(page);\n        await currencyField.evaluate((c: CurrencyField, invalidNumber) => (c.value = invalidNumber), invalidNumber);\n        await expect(inputField).toHaveValue('124.15');\n        await expect(currencyField).toHaveScreenshot('currency-field-invalid-evaluate.png');\n\n        //TODO add tests for before input scenarios\n        await currencyField.evaluate(async (c: CurrencyField) => {\n            c.value = '';\n            await c.updateComplete;\n        });\n\n        //Reset the mock count.\n        await beforeinput.mockReset();\n        // Ensure the mock reset worked as expected.\n        await expect(beforeinput).toBeCalledTimes(0);\n\n        const invalidTypedValue = '1234a55';\n        /**\n         * Added delay when typing, initially a timeout was used as the value of the input element would have a flaky value eg: expect the value of 1,234.55 and instead would get 12.34.\n         * delay is the time to wait between keydown and keyup in milliseconds.\n         */\n        await inputField.type(invalidTypedValue, { delay: 100 });\n\n        await expect(inputField).toHaveValue('1,234.55');\n        await expect(currencyField).toHaveScreenshot('currency-field-invalid-typed.png');\n        await expect(beforeinput).toBeCalledTimes(invalidTypedValue.length);\n\n        await currencyField.evaluate(async (c: CurrencyField) => {\n            c.value = '';\n            await c.updateComplete;\n        });\n\n        const numericValue = 88.88;\n        await currencyField.evaluate((c: CurrencyField, numericValue) => (c.value = numericValue), numericValue);\n        await expect(inputField).toHaveValue(numericValue.toString());\n        await expect(currencyField).toHaveScreenshot('currency-field-numeric-evaluate.png');\n    });\n});\n\ntest('Currency Field - Label Behaviour', testLabelBehaviour('omni-currency-field'));\ntest('Currency Field - Hint Behaviour', testHintBehaviour('omni-currency-field'));\ntest('Currency Field - Error Behaviour', testErrorBehaviour('omni-currency-field'));\ntest('Currency Field - Value Behaviour', testValueBehaviour('omni-currency-field'));\ntest('Currency Field - Clearable Behaviour', testClearableBehaviour('omni-currency-field'));\ntest('Currency Field - Custom Clear Slot Behaviour', testCustomClearableSlotBehaviour('omni-currency-field'));\ntest('Currency Field - Prefix Behaviour', testPrefixBehaviour('omni-currency-field'));\ntest('Currency Field - Suffix Behaviour', testSuffixBehaviour('omni-currency-field'));\ntest('Currency Field - Disabled Behaviour', testDisabledBehaviour('omni-currency-field'));\n"]}